{"Version":"2019-10-30","StartAction":"bbcc76e3-8b6a-433a-ad8d-ee35dbd2208b","Metadata":{"entryPointPosition":{"x":14.4,"y":24},"ActionMetadata":{"200771bd-ae60-4f51-9572-2741615307d5":{"position":{"x":1494.4,"y":337.6}},"bbcc76e3-8b6a-433a-ad8d-ee35dbd2208b":{"position":{"x":154.4,"y":24.8}},"92ad49d0-a848-463d-8528-ac2e9132de71":{"position":{"x":156,"y":246.4},"dynamicParams":[]},"3dfeee25-2a94-4d9b-9cc5-2c346d2d0453":{"position":{"x":425.6,"y":34.4},"toCustomer":true,"fromCustomer":true},"9583df26-e9e5-460d-bb03-d36d65f448a8":{"position":{"x":448.8,"y":294.40000000000003},"dynamicParams":[]},"c92f41e5-a7cc-4419-b36f-44c66dfc7241":{"position":{"x":1252,"y":404.8}},"4f5362e5-096c-481f-aa1e-f93fc283175c":{"position":{"x":1258.4,"y":185.60000000000002},"parameters":{"Text":{"useDynamic":true}},"useDynamic":true},"a239145d-059c-440d-a329-d01bcdb4d53a":{"position":{"x":712.8000000000001,"y":184},"conditionMetadata":[{"id":"ee73b40b-c341-4e51-bf80-f1e16456fc33","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"true"}]},"2caefdcc-1cfc-4d8e-9f9d-a1d7e07c4e32":{"position":{"x":962.4000000000001,"y":393.6},"dynamicParams":[]},"ada562e9-d52c-4f90-882e-0da58c9c7e07":{"position":{"x":960.8000000000001,"y":168},"dynamicMetadata":{}}},"name":"Sample SCV Agent Whisper Flow for Amazon Transcribe","description":"Starts media streaming. Also starts transcription using Amazon Transcribe to prepare for inbound  voice calls and voice call transfers","type":"agentWhisper","status":"published","hash":{}},"Actions":[{"Parameters":{},"Identifier":"200771bd-ae60-4f51-9572-2741615307d5","Type":"EndFlowExecution","Transitions":{}},{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"bbcc76e3-8b6a-433a-ad8d-ee35dbd2208b","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"92ad49d0-a848-463d-8528-ac2e9132de71"}},{"Parameters":{"Attributes":{"isTranscribed":"true","languageCode":"en-US"}},"Identifier":"92ad49d0-a848-463d-8528-ac2e9132de71","Type":"UpdateContactAttributes","Transitions":{"NextAction":"3dfeee25-2a94-4d9b-9cc5-2c346d2d0453","Errors":[{"NextAction":"3dfeee25-2a94-4d9b-9cc5-2c346d2d0453","ErrorType":"NoMatchingError"}]}},{"Parameters":{"MediaStreamingState":"Enabled","MediaStreamType":"Audio","Participants":[{"ParticipantType":"Customer","MediaDirections":["To","From"]}]},"Identifier":"3dfeee25-2a94-4d9b-9cc5-2c346d2d0453","Type":"UpdateContactMediaStreamingBehavior","Transitions":{"NextAction":"a239145d-059c-440d-a329-d01bcdb4d53a","Errors":[{"NextAction":"9583df26-e9e5-460d-bb03-d36d65f448a8","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"isTranscribed":"false","error":"Media streaming failed to start."}},"Identifier":"9583df26-e9e5-460d-bb03-d36d65f448a8","Type":"UpdateContactAttributes","Transitions":{"NextAction":"a239145d-059c-440d-a329-d01bcdb4d53a","Errors":[{"NextAction":"a239145d-059c-440d-a329-d01bcdb4d53a","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Transcript disabled."},"Identifier":"c92f41e5-a7cc-4419-b36f-44c66dfc7241","Type":"MessageParticipant","Transitions":{"NextAction":"4f5362e5-096c-481f-aa1e-f93fc283175c"}},{"Parameters":{"Text":"$.Queue.Name"},"Identifier":"4f5362e5-096c-481f-aa1e-f93fc283175c","Type":"MessageParticipant","Transitions":{"NextAction":"200771bd-ae60-4f51-9572-2741615307d5"}},{"Parameters":{"ComparisonValue":"$.Attributes.isTranscribed"},"Identifier":"a239145d-059c-440d-a329-d01bcdb4d53a","Type":"Compare","Transitions":{"NextAction":"c92f41e5-a7cc-4419-b36f-44c66dfc7241","Conditions":[{"NextAction":"ada562e9-d52c-4f90-882e-0da58c9c7e07","Condition":{"Operator":"Equals","Operands":["true"]}}],"Errors":[{"NextAction":"c92f41e5-a7cc-4419-b36f-44c66dfc7241","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Attributes":{"isTranscribed":"false","error":"Transcription lambda failed."}},"Identifier":"2caefdcc-1cfc-4d8e-9f9d-a1d7e07c4e32","Type":"UpdateContactAttributes","Transitions":{"NextAction":"c92f41e5-a7cc-4419-b36f-44c66dfc7241","Errors":[{"NextAction":"c92f41e5-a7cc-4419-b36f-44c66dfc7241","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-west-2:668462763708:function:LocalContactCenter-kvsConsumerTrigger:active","InvocationTimeLimitSeconds":"3"},"Identifier":"ada562e9-d52c-4f90-882e-0da58c9c7e07","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"4f5362e5-096c-481f-aa1e-f93fc283175c","Errors":[{"NextAction":"2caefdcc-1cfc-4d8e-9f9d-a1d7e07c4e32","ErrorType":"NoMatchingError"}]}}]}