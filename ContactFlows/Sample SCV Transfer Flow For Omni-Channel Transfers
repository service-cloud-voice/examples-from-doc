{"Version":"2019-10-30","StartAction":"6a5e5d4a-96c1-4590-9af4-98f2fed75ecc","Metadata":{"entryPointPosition":{"x":15,"y":15},"snapToGrid":false,"ActionMetadata":{"6a5e5d4a-96c1-4590-9af4-98f2fed75ecc":{"position":{"x":185,"y":59}},"b07c9c7f-cec8-4e37-8836-1b79817406dc":{"position":{"x":707,"y":53},"dynamicMetadata":{"methodName":false},"useDynamic":false},"d1c611c0-e78d-49f7-b3f8-04de11ae4228":{"position":{"x":455,"y":58},"useDynamic":false},"c73545d3-c6b1-4a8e-8a02-98940e2055bc":{"position":{"x":1240,"y":852},"useDynamic":false},"2d8d4f53-badb-4b42-b2e8-4dce8034f12b":{"position":{"x":1017,"y":49},"dynamicParams":["voiceCallId"]},"20a7ef27-5127-40c1-8b5e-971ac6fc7e8e":{"position":{"x":1364,"y":28},"dynamicMetadata":{"methodName":false,"flowDevName":true},"useDynamic":false},"03509e01-cd81-4157-9038-d5e17083f3bb":{"position":{"x":1889,"y":785},"useDynamic":false},"d1fec195-b44f-4703-97fc-ddaef57ffc6c":{"position":{"x":1653,"y":25},"dynamicParams":["queueARN","agentARN"]},"5b15c13e-5475-43b5-a395-b0f4fb4234ac":{"position":{"x":1991,"y":18},"useDynamic":false},"4e5398bf-d3d7-458c-9676-0fadf7a30c3f":{"position":{"x":2717,"y":33},"useDynamic":false},"1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc":{"position":{"x":3135,"y":639},"useDynamic":false},"9b7af8e7-0ca4-4a14-b54d-b14504ed5e3d":{"position":{"x":2297,"y":6},"useDynamic":true,"queue":"agentARN"},"9aa17353-6c29-4271-9f8f-169aeb6e7b28":{"position":{"x":2500,"y":526},"useDynamic":true,"queue":"queueARN"},"9d6d84f6-6c71-436e-b42e-333bb8d479e2":{"position":{"x":3733,"y":610}},"b7e84b1a-2924-4682-895f-f7d2bba2891f":{"position":{"x":3583,"y":22},"useDynamic":false},"1b17452f-a511-41d7-bd13-fd8d8fd54221":{"position":{"x":3474,"y":227},"dynamicParams":[]},"809c177d-8e2e-45ab-9a2b-fe1d59975a16":{"position":{"x":2966,"y":56}},"bd8314c3-aff2-499e-a9d8-7cf7aacce79b":{"position":{"x":3267,"y":32},"useDynamic":false}}},"Actions":[{"Identifier":"6a5e5d4a-96c1-4590-9af4-98f2fed75ecc","Parameters":{"FlowLoggingBehavior":"Enabled"},"Transitions":{"NextAction":"d1c611c0-e78d-49f7-b3f8-04de11ae4228","Errors":[],"Conditions":[]},"Type":"UpdateFlowLoggingBehavior"},{"Identifier":"b07c9c7f-cec8-4e37-8836-1b79817406dc","Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-west-2:058002916250:function:StmfaResell01Oregon-InvokeTelephonyIntegrationApiFunction","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"methodName":"createTransferVC"}},"Transitions":{"NextAction":"2d8d4f53-badb-4b42-b2e8-4dce8034f12b","Errors":[{"NextAction":"d1c611c0-e78d-49f7-b3f8-04de11ae4228","ErrorType":"NoMatchingError"}],"Conditions":[]},"Type":"InvokeLambdaFunction"},{"Identifier":"d1c611c0-e78d-49f7-b3f8-04de11ae4228","Parameters":{"LoopCount":"2"},"Transitions":{"NextAction":"c73545d3-c6b1-4a8e-8a02-98940e2055bc","Errors":[],"Conditions":[{"NextAction":"c73545d3-c6b1-4a8e-8a02-98940e2055bc","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}},{"NextAction":"b07c9c7f-cec8-4e37-8836-1b79817406dc","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}}]},"Type":"Loop"},{"Identifier":"c73545d3-c6b1-4a8e-8a02-98940e2055bc","Parameters":{"Text":"We’re sorry—Transfer Voice Call Creation Failed"},"Transitions":{"NextAction":"9d6d84f6-6c71-436e-b42e-333bb8d479e2","Errors":[],"Conditions":[]},"Type":"MessageParticipant"},{"Identifier":"2d8d4f53-badb-4b42-b2e8-4dce8034f12b","Parameters":{"Attributes":{"voiceCallId":"$.External.voiceCallId"}},"Transitions":{"NextAction":"20a7ef27-5127-40c1-8b5e-971ac6fc7e8e","Errors":[{"NextAction":"c73545d3-c6b1-4a8e-8a02-98940e2055bc","ErrorType":"NoMatchingError"}],"Conditions":[]},"Type":"UpdateContactAttributes"},{"Identifier":"20a7ef27-5127-40c1-8b5e-971ac6fc7e8e","Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-west-2:058002916250:function:StmfaResell01Oregon-InvokeTelephonyIntegrationApiFunction","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"flowDevName":"$.Attributes.omniFlowFqn","methodName":"executeOmniFlow"}},"Transitions":{"NextAction":"d1fec195-b44f-4703-97fc-ddaef57ffc6c","Errors":[{"NextAction":"03509e01-cd81-4157-9038-d5e17083f3bb","ErrorType":"NoMatchingError"}],"Conditions":[]},"Type":"InvokeLambdaFunction"},{"Identifier":"03509e01-cd81-4157-9038-d5e17083f3bb","Parameters":{"Text":"We’re sorry—Execute Omni Flow Failed"},"Transitions":{"NextAction":"9d6d84f6-6c71-436e-b42e-333bb8d479e2","Errors":[],"Conditions":[]},"Type":"MessageParticipant"},{"Identifier":"d1fec195-b44f-4703-97fc-ddaef57ffc6c","Parameters":{"Attributes":{"agentARN":"$.External.agent","queueARN":"$.External.queue"}},"Transitions":{"NextAction":"5b15c13e-5475-43b5-a395-b0f4fb4234ac","Errors":[{"NextAction":"03509e01-cd81-4157-9038-d5e17083f3bb","ErrorType":"NoMatchingError"}],"Conditions":[]},"Type":"UpdateContactAttributes"},{"Identifier":"5b15c13e-5475-43b5-a395-b0f4fb4234ac","Parameters":{"Text":"Transferring you to the appropriate queue. One moment please."},"Transitions":{"NextAction":"9b7af8e7-0ca4-4a14-b54d-b14504ed5e3d","Errors":[],"Conditions":[]},"Type":"MessageParticipant"},{"Identifier":"4e5398bf-d3d7-458c-9676-0fadf7a30c3f","Parameters":{"MetricType":"NumberOfAgentsAvailable"},"Transitions":{"NextAction":"1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc","Errors":[{"NextAction":"1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc","ErrorType":"NoMatchingError"},{"NextAction":"1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc","ErrorType":"NoMatchingCondition"}],"Conditions":[{"NextAction":"809c177d-8e2e-45ab-9a2b-fe1d59975a16","Condition":{"Operator":"NumberGreaterThan","Operands":["0"]}}]},"Type":"CheckMetricData"},{"Identifier":"1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc","Parameters":{"Text":"No agents are available to take your call. Please try again at a later time. We apologize for the inconvenience. Goodbye."},"Transitions":{"NextAction":"9d6d84f6-6c71-436e-b42e-333bb8d479e2","Errors":[],"Conditions":[]},"Type":"MessageParticipant"},{"Identifier":"9b7af8e7-0ca4-4a14-b54d-b14504ed5e3d","Parameters":{"AgentId":"$.Attributes.agentARN"},"Transitions":{"NextAction":"4e5398bf-d3d7-458c-9676-0fadf7a30c3f","Errors":[{"NextAction":"9aa17353-6c29-4271-9f8f-169aeb6e7b28","ErrorType":"NoMatchingError"}],"Conditions":[]},"Type":"UpdateContactTargetQueue"},{"Identifier":"9aa17353-6c29-4271-9f8f-169aeb6e7b28","Parameters":{"QueueId":"$.Attributes.queueARN"},"Transitions":{"NextAction":"4e5398bf-d3d7-458c-9676-0fadf7a30c3f","Errors":[{"NextAction":"1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc","ErrorType":"NoMatchingError"}],"Conditions":[]},"Type":"UpdateContactTargetQueue"},{"Identifier":"9d6d84f6-6c71-436e-b42e-333bb8d479e2","Type":"DisconnectParticipant","Parameters":{},"Transitions":{}},{"Identifier":"b7e84b1a-2924-4682-895f-f7d2bba2891f","Parameters":{"Text":"We are experiencing a higher than normal volume of calls and cannot currently assist you. Please try again later. We apologize for any inconvenience. Goodbye."},"Transitions":{"NextAction":"9d6d84f6-6c71-436e-b42e-333bb8d479e2","Errors":[],"Conditions":[]},"Type":"MessageParticipant"},{"Identifier":"1b17452f-a511-41d7-bd13-fd8d8fd54221","Parameters":{"Attributes":{"error":"Failed to transfer to queue."}},"Transitions":{"NextAction":"1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc","Errors":[{"NextAction":"1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc","ErrorType":"NoMatchingError"}],"Conditions":[]},"Type":"UpdateContactAttributes"},{"Identifier":"809c177d-8e2e-45ab-9a2b-fe1d59975a16","Parameters":{"RecordingBehavior":{"RecordedParticipants":["Agent","Customer"]}},"Transitions":{"NextAction":"bd8314c3-aff2-499e-a9d8-7cf7aacce79b","Errors":[],"Conditions":[]},"Type":"UpdateContactRecordingBehavior"},{"Identifier":"bd8314c3-aff2-499e-a9d8-7cf7aacce79b","Transitions":{"NextAction":"1b17452f-a511-41d7-bd13-fd8d8fd54221","Errors":[{"NextAction":"1b17452f-a511-41d7-bd13-fd8d8fd54221","ErrorType":"NoMatchingError"},{"NextAction":"b7e84b1a-2924-4682-895f-f7d2bba2891f","ErrorType":"QueueAtCapacity"}],"Conditions":[]},"Type":"TransferContactToQueue"}]}