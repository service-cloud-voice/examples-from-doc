{"Version":"2019-10-30","StartAction":"6a5e5d4a-96c1-4590-9af4-98f2fed75ecc","Metadata":{"entryPointPosition":{"x":32.800000000000004,"y":26.400000000000002},"ActionMetadata":{"6a5e5d4a-96c1-4590-9af4-98f2fed75ecc":{"position":{"x":188,"y":24}},"d5ab3b57-642f-49c9-accf-522f54f8ae6e":{"position":{"x":710.4000000000001,"y":246.4},"dynamicParams":[]},"1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc":{"position":{"x":1805.6000000000001,"y":180.8}},"9d6d84f6-6c71-436e-b42e-333bb8d479e2":{"position":{"x":2553.6000000000004,"y":288.8}},"5edc975c-3342-4da7-b51b-0eca52fe1545":{"position":{"x":1721.6000000000001,"y":372.8},"dynamicParams":[]},"fdf939ab-d240-4c23-a6f3-8ed528cd47b1":{"position":{"x":1233.6000000000001,"y":17.6}},"bc4445ac-1dd6-41a2-917b-2ed3a5c9899e":{"position":{"x":1989.6000000000001,"y":322.40000000000003}},"922d803d-97d1-49fe-9cdd-d886e36d51bc":{"position":{"x":2297.6,"y":16.8}},"2d8d4f53-badb-4b42-b2e8-4dce8034f12b":{"position":{"x":965.6,"y":20.8},"parameters":{"Attributes":{"voiceCallId":{"useDynamic":true}}},"dynamicParams":["voiceCallId"]},"d1c611c0-e78d-49f7-b3f8-04de11ae4228":{"position":{"x":458.40000000000003,"y":22.400000000000002}},"b07c9c7f-cec8-4e37-8836-1b79817406dc":{"position":{"x":710.4000000000001,"y":21.6},"dynamicMetadata":{"methodName":false}},"22be9ead-54a4-47e5-8947-55e750dd62f5":{"position":{"x":1502.4,"y":14.4}},"1b17452f-a511-41d7-bd13-fd8d8fd54221":{"position":{"x":2042.4,"y":16.8},"dynamicParams":[]},"6d5c3d7d-f5ea-4aff-bc9e-7be74d0794f2":{"position":{"x":1784.8000000000002,"y":12.8},"parameters":{"ContactFlowId":{"displayName":"Sample SCV Transcription Subflow with Contact Lens"}},"ContactFlow":{"text":"Sample SCV Transcription Subflow with Contact Lens"}}},"name":"Sample SCV Transfer Flow For Queue Transfers","description":"Creates a voice call record and transfers the call from an agent to a specified queue.","type":"queueTransfer","status":"published","hash":{}},"Actions":[{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"6a5e5d4a-96c1-4590-9af4-98f2fed75ecc","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"d1c611c0-e78d-49f7-b3f8-04de11ae4228"}},{"Parameters":{"Attributes":{"error":"VoiceCall record creation failed."}},"Identifier":"d5ab3b57-642f-49c9-accf-522f54f8ae6e","Type":"UpdateContactAttributes","Transitions":{"NextAction":"fdf939ab-d240-4c23-a6f3-8ed528cd47b1","Errors":[{"NextAction":"fdf939ab-d240-4c23-a6f3-8ed528cd47b1","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"No agents are available to take your call. Please try again at a later time. We apologize for the inconvenience. Goodbye."},"Identifier":"1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc","Type":"MessageParticipant","Transitions":{"NextAction":"9d6d84f6-6c71-436e-b42e-333bb8d479e2"}},{"Parameters":{},"Identifier":"9d6d84f6-6c71-436e-b42e-333bb8d479e2","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"Attributes":{"error":"Failed to check the queue status."}},"Identifier":"5edc975c-3342-4da7-b51b-0eca52fe1545","Type":"UpdateContactAttributes","Transitions":{"NextAction":"bc4445ac-1dd6-41a2-917b-2ed3a5c9899e","Errors":[{"NextAction":"bc4445ac-1dd6-41a2-917b-2ed3a5c9899e","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"fdf939ab-d240-4c23-a6f3-8ed528cd47b1","Type":"CheckHoursOfOperation","Transitions":{"NextAction":"5edc975c-3342-4da7-b51b-0eca52fe1545","Conditions":[{"NextAction":"22be9ead-54a4-47e5-8947-55e750dd62f5","Condition":{"Operator":"Equals","Operands":["True"]}},{"NextAction":"bc4445ac-1dd6-41a2-917b-2ed3a5c9899e","Condition":{"Operator":"Equals","Operands":["False"]}}],"Errors":[{"NextAction":"5edc975c-3342-4da7-b51b-0eca52fe1545","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"The department you are trying to reach is not currently open. Please try your call again later. Goodbye."},"Identifier":"bc4445ac-1dd6-41a2-917b-2ed3a5c9899e","Type":"MessageParticipant","Transitions":{"NextAction":"9d6d84f6-6c71-436e-b42e-333bb8d479e2"}},{"Parameters":{"Text":"I'm sorry. We have encountered an error and cannot currently handle your call. Please try again later. We apologize for any inconvenience. Goodbye."},"Identifier":"922d803d-97d1-49fe-9cdd-d886e36d51bc","Type":"MessageParticipant","Transitions":{"NextAction":"9d6d84f6-6c71-436e-b42e-333bb8d479e2","Errors":[{"NextAction":"9d6d84f6-6c71-436e-b42e-333bb8d479e2","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"voiceCallId":"$.External.voiceCallId"}},"Identifier":"2d8d4f53-badb-4b42-b2e8-4dce8034f12b","Type":"UpdateContactAttributes","Transitions":{"NextAction":"fdf939ab-d240-4c23-a6f3-8ed528cd47b1","Errors":[{"NextAction":"fdf939ab-d240-4c23-a6f3-8ed528cd47b1","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"2"},"Identifier":"d1c611c0-e78d-49f7-b3f8-04de11ae4228","Type":"Loop","Transitions":{"NextAction":"d5ab3b57-642f-49c9-accf-522f54f8ae6e","Conditions":[{"NextAction":"b07c9c7f-cec8-4e37-8836-1b79817406dc","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"d5ab3b57-642f-49c9-accf-522f54f8ae6e","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-west-2:668462763708:function:LocalContactCenter-InvokeTelephonyIntegrationApiFunction:active","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"methodName":"createTransferVC"}},"Identifier":"b07c9c7f-cec8-4e37-8836-1b79817406dc","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"2d8d4f53-badb-4b42-b2e8-4dce8034f12b","Errors":[{"NextAction":"d1c611c0-e78d-49f7-b3f8-04de11ae4228","ErrorType":"NoMatchingError"}]}},{"Parameters":{"MetricType":"NumberOfAgentsStaffed"},"Identifier":"22be9ead-54a4-47e5-8947-55e750dd62f5","Type":"CheckMetricData","Transitions":{"NextAction":"5edc975c-3342-4da7-b51b-0eca52fe1545","Conditions":[{"NextAction":"6d5c3d7d-f5ea-4aff-bc9e-7be74d0794f2","Condition":{"Operator":"NumberGreaterThan","Operands":["0"]}}],"Errors":[{"NextAction":"1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc","ErrorType":"NoMatchingCondition"},{"NextAction":"5edc975c-3342-4da7-b51b-0eca52fe1545","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"error":"Failed to transfer to transcription flow."}},"Identifier":"1b17452f-a511-41d7-bd13-fd8d8fd54221","Type":"UpdateContactAttributes","Transitions":{"NextAction":"922d803d-97d1-49fe-9cdd-d886e36d51bc","Errors":[{"NextAction":"922d803d-97d1-49fe-9cdd-d886e36d51bc","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ContactFlowId":"arn:aws:connect:us-west-2:668462763708:instance/76a9b70e-ad9c-48ba-88a3-861d5825a0e4/contact-flow/de866a57-37e2-492f-bb49-70fe23f2bf7f"},"Identifier":"6d5c3d7d-f5ea-4aff-bc9e-7be74d0794f2","Type":"TransferToFlow","Transitions":{"NextAction":"1b17452f-a511-41d7-bd13-fd8d8fd54221","Errors":[{"NextAction":"1b17452f-a511-41d7-bd13-fd8d8fd54221","ErrorType":"NoMatchingError"}]}}]}