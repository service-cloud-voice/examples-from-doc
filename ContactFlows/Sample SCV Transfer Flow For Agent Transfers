{"Version":"2019-10-30","StartAction":"28d63d08-ddcb-48f8-99e7-e7883ad7f30b","Metadata":{"entryPointPosition":{"x":14.4,"y":36.800000000000004},"ActionMetadata":{"28d63d08-ddcb-48f8-99e7-e7883ad7f30b":{"position":{"x":173.60000000000002,"y":38.400000000000006}},"5ffaeb8d-c65f-4a6f-9faa-81a787dc4a81":{"position":{"x":1296.8000000000002,"y":296.8},"dynamicParams":[]},"ec6715e3-b164-403a-90ad-e9d427d527ab":{"position":{"x":1666.4,"y":40.800000000000004}},"e7c64b64-098b-4252-bfc8-01f3d87b1896":{"position":{"x":1908.8000000000002,"y":52.800000000000004}},"a200ee53-94d2-4e85-853b-7d3100e5fdd7":{"position":{"x":414.40000000000003,"y":37.6}},"10ddcd29-fc62-4ba7-9259-1e15cc03b549":{"position":{"x":672,"y":30.400000000000002},"dynamicMetadata":{"methodName":false}},"658f91a9-981b-4f5c-8c62-8e6c8263905c":{"position":{"x":796.8000000000001,"y":262.40000000000003},"dynamicParams":[]},"900801c5-cb25-4b22-a455-7fc7ee64f1a1":{"position":{"x":1412,"y":38.400000000000006},"dynamicParams":[]},"7cae6c44-6911-4e40-bbf7-f0855d10c69e":{"position":{"x":905.6,"y":32},"parameters":{"Attributes":{"voiceCallId":{"useDynamic":true}}},"dynamicParams":["voiceCallId"]},"7241a4cb-0bec-4e97-894a-c9bb2b7af7a0":{"position":{"x":1176,"y":41.6},"parameters":{"ContactFlowId":{"displayName":"Sample SCV Transcription Subflow with Contact Lens"}},"ContactFlow":{"text":"Sample SCV Transcription Subflow with Contact Lens"}}},"name":"Sample SCV Transfer Flow For Agent Transfers","description":"Creates a voice call record and transfers the call from one agent to another specified agent","type":"agentTransfer","status":"published","hash":{}},"Actions":[{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"28d63d08-ddcb-48f8-99e7-e7883ad7f30b","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"a200ee53-94d2-4e85-853b-7d3100e5fdd7"}},{"Parameters":{"Attributes":{"error":"Failed to parse the result of the voice call creation lambda."}},"Identifier":"5ffaeb8d-c65f-4a6f-9faa-81a787dc4a81","Type":"UpdateContactAttributes","Transitions":{"NextAction":"ec6715e3-b164-403a-90ad-e9d427d527ab","Errors":[{"NextAction":"ec6715e3-b164-403a-90ad-e9d427d527ab","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"I'm sorry. We have encountered an error and cannot currently handle your call. Please try again later. We apologize for any inconvenience. Goodbye."},"Identifier":"ec6715e3-b164-403a-90ad-e9d427d527ab","Type":"MessageParticipant","Transitions":{"NextAction":"e7c64b64-098b-4252-bfc8-01f3d87b1896","Errors":[{"NextAction":"e7c64b64-098b-4252-bfc8-01f3d87b1896","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"e7c64b64-098b-4252-bfc8-01f3d87b1896","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"LoopCount":"2"},"Identifier":"a200ee53-94d2-4e85-853b-7d3100e5fdd7","Type":"Loop","Transitions":{"NextAction":"658f91a9-981b-4f5c-8c62-8e6c8263905c","Conditions":[{"NextAction":"10ddcd29-fc62-4ba7-9259-1e15cc03b549","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"658f91a9-981b-4f5c-8c62-8e6c8263905c","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-west-2:668462763708:function:LocalContactCenter-InvokeTelephonyIntegrationApiFunction:active","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"methodName":"createTransferVC"}},"Identifier":"10ddcd29-fc62-4ba7-9259-1e15cc03b549","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"7cae6c44-6911-4e40-bbf7-f0855d10c69e","Errors":[{"NextAction":"a200ee53-94d2-4e85-853b-7d3100e5fdd7","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"error":"VoiceCall record creation failed."}},"Identifier":"658f91a9-981b-4f5c-8c62-8e6c8263905c","Type":"UpdateContactAttributes","Transitions":{"NextAction":"7241a4cb-0bec-4e97-894a-c9bb2b7af7a0","Errors":[{"NextAction":"7241a4cb-0bec-4e97-894a-c9bb2b7af7a0","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"error":"Failed to transfer to Transcription flow."}},"Identifier":"900801c5-cb25-4b22-a455-7fc7ee64f1a1","Type":"UpdateContactAttributes","Transitions":{"NextAction":"ec6715e3-b164-403a-90ad-e9d427d527ab","Errors":[{"NextAction":"ec6715e3-b164-403a-90ad-e9d427d527ab","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"voiceCallId":"$.External.voiceCallId"}},"Identifier":"7cae6c44-6911-4e40-bbf7-f0855d10c69e","Type":"UpdateContactAttributes","Transitions":{"NextAction":"7241a4cb-0bec-4e97-894a-c9bb2b7af7a0","Errors":[{"NextAction":"5ffaeb8d-c65f-4a6f-9faa-81a787dc4a81","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ContactFlowId":"arn:aws:connect:us-west-2:668462763708:instance/76a9b70e-ad9c-48ba-88a3-861d5825a0e4/contact-flow/de866a57-37e2-492f-bb49-70fe23f2bf7f"},"Identifier":"7241a4cb-0bec-4e97-894a-c9bb2b7af7a0","Type":"TransferToFlow","Transitions":{"NextAction":"900801c5-cb25-4b22-a455-7fc7ee64f1a1","Errors":[{"NextAction":"900801c5-cb25-4b22-a455-7fc7ee64f1a1","ErrorType":"NoMatchingError"}]}}]}