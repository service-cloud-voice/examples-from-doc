{"Version":"2019-10-30","StartAction":"0af1a260-10dc-4315-8fec-e3f4c2d67b93","Metadata":{"entryPointPosition":{"x":50.400000000000006,"y":15.200000000000001},"ActionMetadata":{"46971a65-27a1-4110-96fc-e210ae2bf6ba":{"position":{"x":1353.6000000000001,"y":420}},"15637b42-e4db-46d7-8c1c-a0c7717b9ede":{"position":{"x":229.60000000000002,"y":397.6},"dynamicParams":[]},"1d29af94-bcc6-4c0f-baf5-63d9afbd4688":{"position":{"x":224.8,"y":204}},"0af1a260-10dc-4315-8fec-e3f4c2d67b93":{"position":{"x":224.8,"y":21.6}},"e835b496-db71-49d8-bc6c-3bf42d048cc1":{"position":{"x":520,"y":292.8},"dynamicParams":[]},"d591c825-90aa-4417-9e47-bd9dbebfadb0":{"position":{"x":496.8,"y":32.800000000000004},"toCustomer":true,"fromCustomer":true},"54e7f1cb-b3a6-4a44-894a-aea4e52b92ef":{"position":{"x":1033.6000000000001,"y":392},"dynamicParams":[]},"dadacbc1-a4c6-4fac-9a50-61cdc90747dc":{"position":{"x":1324.8000000000002,"y":208}},"04e74c2e-dad1-47ae-ad2f-c40b5be30e34":{"position":{"x":783.2,"y":182.4},"conditionMetadata":[{"id":"f06385dd-71e7-47e5-83f5-dd70bea1bef1","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"true"}]},"50a25805-8009-45c9-9ca4-9a6ca71855bf":{"position":{"x":1032,"y":165.60000000000002},"dynamicMetadata":{}}},"name":"Sample SCV Outbound Flow With Transcription Using Amazon Transcribe","description":"Starts media streaming. Also starts transcription using Amazon Transcribe, capturing and transcribing audio for outbound voice calls","type":"outboundWhisper","status":"published","hash":{}},"Actions":[{"Parameters":{},"Identifier":"46971a65-27a1-4110-96fc-e210ae2bf6ba","Type":"EndFlowExecution","Transitions":{}},{"Parameters":{"Attributes":{"isTranscribed":"true","languageCode":"en-US"}},"Identifier":"15637b42-e4db-46d7-8c1c-a0c7717b9ede","Type":"UpdateContactAttributes","Transitions":{"NextAction":"d591c825-90aa-4417-9e47-bd9dbebfadb0","Errors":[{"NextAction":"d591c825-90aa-4417-9e47-bd9dbebfadb0","ErrorType":"NoMatchingError"}]}},{"Parameters":{"RecordingBehavior":{"RecordedParticipants":["Agent","Customer"]}},"Identifier":"1d29af94-bcc6-4c0f-baf5-63d9afbd4688","Type":"UpdateContactRecordingBehavior","Transitions":{"NextAction":"15637b42-e4db-46d7-8c1c-a0c7717b9ede"}},{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"0af1a260-10dc-4315-8fec-e3f4c2d67b93","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"1d29af94-bcc6-4c0f-baf5-63d9afbd4688"}},{"Parameters":{"Attributes":{"isTranscribed":"false","error":"Media streaming failed to start."}},"Identifier":"e835b496-db71-49d8-bc6c-3bf42d048cc1","Type":"UpdateContactAttributes","Transitions":{"NextAction":"04e74c2e-dad1-47ae-ad2f-c40b5be30e34","Errors":[{"NextAction":"04e74c2e-dad1-47ae-ad2f-c40b5be30e34","ErrorType":"NoMatchingError"}]}},{"Parameters":{"MediaStreamingState":"Enabled","MediaStreamType":"Audio","Participants":[{"ParticipantType":"Customer","MediaDirections":["To","From"]}]},"Identifier":"d591c825-90aa-4417-9e47-bd9dbebfadb0","Type":"UpdateContactMediaStreamingBehavior","Transitions":{"NextAction":"04e74c2e-dad1-47ae-ad2f-c40b5be30e34","Errors":[{"NextAction":"e835b496-db71-49d8-bc6c-3bf42d048cc1","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"isTranscribed":"false","error":"Transcription lambda failed."}},"Identifier":"54e7f1cb-b3a6-4a44-894a-aea4e52b92ef","Type":"UpdateContactAttributes","Transitions":{"NextAction":"dadacbc1-a4c6-4fac-9a50-61cdc90747dc","Errors":[{"NextAction":"dadacbc1-a4c6-4fac-9a50-61cdc90747dc","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"This call may be recorded for training purposes."},"Identifier":"dadacbc1-a4c6-4fac-9a50-61cdc90747dc","Type":"MessageParticipant","Transitions":{"NextAction":"46971a65-27a1-4110-96fc-e210ae2bf6ba"}},{"Parameters":{"ComparisonValue":"$.Attributes.isTranscribed"},"Identifier":"04e74c2e-dad1-47ae-ad2f-c40b5be30e34","Type":"Compare","Transitions":{"NextAction":"dadacbc1-a4c6-4fac-9a50-61cdc90747dc","Conditions":[{"NextAction":"50a25805-8009-45c9-9ca4-9a6ca71855bf","Condition":{"Operator":"Equals","Operands":["true"]}}],"Errors":[{"NextAction":"dadacbc1-a4c6-4fac-9a50-61cdc90747dc","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-west-2:668462763708:function:LocalContactCenter-kvsConsumerTrigger:active","InvocationTimeLimitSeconds":"3"},"Identifier":"50a25805-8009-45c9-9ca4-9a6ca71855bf","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"dadacbc1-a4c6-4fac-9a50-61cdc90747dc","Errors":[{"NextAction":"54e7f1cb-b3a6-4a44-894a-aea4e52b92ef","ErrorType":"NoMatchingError"}]}}]}