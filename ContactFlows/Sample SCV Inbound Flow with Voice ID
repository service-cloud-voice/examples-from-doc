{"Version":"2019-10-30","StartAction":"f096d844-7043-459c-b533-c4aa102f35e6","Metadata":{"entryPointPosition":{"x":14.4,"y":154.4},"ActionMetadata":{"b2d7c987-4641-4933-b54d-60c19cf3fe53":{"position":{"x":97.60000000000001,"y":-126.4},"children":["9d40d11c-bf16-41aa-90f1-de457c658a96"],"overrideConsoleVoice":false,"fragments":{"SetContactData":"9d40d11c-bf16-41aa-90f1-de457c658a96"},"overrideLanguageAttribute":true},"9d40d11c-bf16-41aa-90f1-de457c658a96":{"position":{"x":97.60000000000001,"y":-126.4},"dynamicParams":[]},"39bde8c8-5fa2-4312-a9a6-d9cab13806ef":{"position":{"x":398.40000000000003,"y":-136},"children":["771f11af-fa01-4d2e-8a20-27a356e00185"],"dynamicParams":[]},"771f11af-fa01-4d2e-8a20-27a356e00185":{"position":{"x":398.40000000000003,"y":-136},"voiceAuthenticationUseDynamic":false,"voiceAuthenticationResponseTimeUseDynamic":false,"fraudDetectionUseDynamic":false,"fragments":{"SetContactData":"39bde8c8-5fa2-4312-a9a6-d9cab13806ef"}},"64643c23-2706-4e4a-b8e3-7846ac34cc8a":{"position":{"x":2000,"y":588}},"4bc2b013-c28d-4a53-ac69-7c47e127651d":{"position":{"x":1968,"y":364.8}},"aae462ae-127e-4f17-a805-d93384c2ddbf":{"position":{"x":1768.8000000000002,"y":584.8000000000001}},"da1c87de-5857-4a04-858e-8e53090ef529":{"position":{"x":1506.4,"y":364},"dynamicParams":[]},"906504ea-e592-4eb5-9ce4-8651ef87a6f0":{"position":{"x":1741.6000000000001,"y":365.6},"parameters":{"QueueId":{"displayName":"BasicQueue"}},"queue":{"text":"BasicQueue"}},"52beb368-06bb-4494-93b1-4be3a824d41f":{"position":{"x":1513.6000000000001,"y":585.6},"parameters":{"Attributes":{"voiceCallId":{"useDynamic":true}}},"dynamicParams":["voiceCallId"]},"2cab4f51-d8d3-4b77-98cc-917fffe29026":{"position":{"x":1256.8000000000002,"y":362.40000000000003},"dynamicMetadata":{"methodName":false}},"33fdf4c5-aee5-4bfb-aabe-50856d350862":{"position":{"x":1016.8000000000001,"y":362.40000000000003}},"3afe4ac3-a65b-4e69-a892-57b42f6ac651":{"position":{"x":2322.4,"y":370.40000000000003}},"f096d844-7043-459c-b533-c4aa102f35e6":{"position":{"x":157.60000000000002,"y":66.4}},"2c04d490-d9fc-4419-9a84-c92b7739a2b2":{"position":{"x":1506.4,"y":19.200000000000003},"parameters":{"Attributes":{"VoiceIdTwo":{"useDynamic":true}}},"dynamicParams":["VoiceIdTwo"]},"51aaa9ec-749c-4b37-8806-c1e6775a8859":{"position":{"x":478.40000000000003,"y":365.6}},"6fb644ab-127b-4bf0-826a-b6e6c4882037":{"position":{"x":1004,"y":76.80000000000001},"parameters":{"Attributes":{"VoiceIdOne":{"useDynamic":true}}},"dynamicParams":["VoiceIdOne"]},"d5cd7e3d-687f-4530-b7e1-07ff76ad64c0":{"position":{"x":1500.8000000000002,"y":-190.4}},"956a93a5-8352-40e4-a8b0-31d88127ccf5":{"position":{"x":1257.6000000000001,"y":-192},"conditionMetadata":[{"id":"eb451d0c-7f58-4a76-a65d-14610d99ff57","operator":{"name":"Starts with","value":"StartsWith","shortDisplay":"starts with"},"value":"#"},{"id":"3df0b334-0220-4ff2-bb04-641b5a98784b","operator":{"name":"Contains","value":"Contains","shortDisplay":"contains"},"value":"*"},{"id":"da696d33-5aa2-46ac-9fba-0d458a15586a","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Timeout"}]},"e46479b0-bd92-458d-9d42-4d1587dd255f":{"position":{"x":1262.4,"y":128},"conditionMetadata":[],"countryCodePrefix":"+1"},"301425c2-730b-442a-9b13-fc405ca79314":{"position":{"x":696.8000000000001,"y":61.6},"conditionMetadata":[{"id":"5924aea1-1e0f-44be-a6a2-506d100ea7d4","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"*"},{"id":"9d488772-24c1-4255-9210-dd1f412532fd","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Timeout"},{"id":"948ad61b-5c1b-47d6-9e96-b9eef2d5cb0e","operator":{"name":"Starts with","value":"StartsWith","shortDisplay":"starts with"},"value":"#"}]},"4b123a2d-3f91-4c04-bb57-b9d35ec38bfc":{"position":{"x":998.4000000000001,"y":-144.8}},"65280930-05f7-423e-a254-b2f78006ba16":{"position":{"x":2234.4,"y":95.2}},"23a5880e-04ce-401f-80af-b23d9c32b3f5":{"position":{"x":1729.6000000000001,"y":-186.4}},"aefc42a7-f808-4403-945c-d74f0855ab64":{"position":{"x":1737.6000000000001,"y":44.800000000000004}},"d10439dd-467d-440e-93b6-a0a2e2cc1773":{"position":{"x":1990.4,"y":-194.4},"parameters":{"CustomerId":{"useDynamic":true}},"dynamicParams":["customerId"]},"94bd6256-cb7f-49f7-b83c-b843552621df":{"position":{"x":1993.6000000000001,"y":24.8}},"60226e5c-be81-4440-8764-a7e53eb3262b":{"position":{"x":426.40000000000003,"y":92.80000000000001}},"f0580d95-616c-4b6a-839a-3bcfc11c0d07":{"position":{"x":690.4000000000001,"y":-144.8},"conditionMetadata":[],"countryCodePrefix":"+1"},"a39005e6-2506-4275-86bf-060770c18f04":{"position":{"x":772.8000000000001,"y":361.6}}},"name":"Sample SCV Inbound Flow with Voice ID","description":"Sample Inbound Flow With Voice ID","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{"TextToSpeechVoice":"Joanna"},"Identifier":"b2d7c987-4641-4933-b54d-60c19cf3fe53","Type":"UpdateContactTextToSpeechVoice","Transitions":{"NextAction":"9d40d11c-bf16-41aa-90f1-de457c658a96"}},{"Parameters":{"LanguageCode":"en-US"},"Identifier":"9d40d11c-bf16-41aa-90f1-de457c658a96","Type":"UpdateContactData","Transitions":{"NextAction":"60226e5c-be81-4440-8764-a7e53eb3262b","Errors":[{"NextAction":"60226e5c-be81-4440-8764-a7e53eb3262b","ErrorType":"NoMatchingError"}]}},{"Parameters":{"IsVoiceIdStreamingEnabled":"true","IsFraudDetectionEnabled":"true","IsVoiceAuthenticationEnabled":"true","VoiceAuthenticationThreshold":"90","VoiceAuthenticationResponseTime":"10","FraudDetectionThreshold":"90"},"Identifier":"39bde8c8-5fa2-4312-a9a6-d9cab13806ef","Type":"UpdateContactData","Transitions":{"NextAction":"771f11af-fa01-4d2e-8a20-27a356e00185","Errors":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"771f11af-fa01-4d2e-8a20-27a356e00185","Type":"StartVoiceIdStream","Transitions":{"NextAction":"f0580d95-616c-4b6a-839a-3bcfc11c0d07","Errors":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"64643c23-2706-4e4a-b8e3-7846ac34cc8a","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{},"Identifier":"4bc2b013-c28d-4a53-ac69-7c47e127651d","Type":"TransferContactToQueue","Transitions":{"NextAction":"aae462ae-127e-4f17-a805-d93384c2ddbf","Errors":[{"NextAction":"aae462ae-127e-4f17-a805-d93384c2ddbf","ErrorType":"QueueAtCapacity"},{"NextAction":"aae462ae-127e-4f17-a805-d93384c2ddbf","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Our system is currently experiencies technical issues. Please call back at a later time. Sorry for the inconvenience. Goodbye."},"Identifier":"aae462ae-127e-4f17-a805-d93384c2ddbf","Type":"MessageParticipant","Transitions":{"NextAction":"64643c23-2706-4e4a-b8e3-7846ac34cc8a","Errors":[{"NextAction":"64643c23-2706-4e4a-b8e3-7846ac34cc8a","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"error":"VoiceCall record creation failed."}},"Identifier":"da1c87de-5857-4a04-858e-8e53090ef529","Type":"UpdateContactAttributes","Transitions":{"NextAction":"906504ea-e592-4eb5-9ce4-8651ef87a6f0","Errors":[{"NextAction":"906504ea-e592-4eb5-9ce4-8651ef87a6f0","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"arn:aws:connect:us-west-2:575188527017:instance/f610bcfb-c094-47c9-b3e8-4cff3bbc6b1c/queue/70d2b942-48f8-432e-82de-4050bf0f1348"},"Identifier":"906504ea-e592-4eb5-9ce4-8651ef87a6f0","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"4bc2b013-c28d-4a53-ac69-7c47e127651d","Errors":[{"NextAction":"aae462ae-127e-4f17-a805-d93384c2ddbf","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"voiceCallId":"$.External.voiceCallId"}},"Identifier":"52beb368-06bb-4494-93b1-4be3a824d41f","Type":"UpdateContactAttributes","Transitions":{"NextAction":"906504ea-e592-4eb5-9ce4-8651ef87a6f0","Errors":[{"NextAction":"906504ea-e592-4eb5-9ce4-8651ef87a6f0","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-west-2:575188527017:function:voiceidtesting-InvokeTelephonyIntegrationApiFunction:active","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"methodName":"createVoiceCall"}},"Identifier":"2cab4f51-d8d3-4b77-98cc-917fffe29026","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"52beb368-06bb-4494-93b1-4be3a824d41f","Errors":[{"NextAction":"33fdf4c5-aee5-4bfb-aabe-50856d350862","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"2"},"Identifier":"33fdf4c5-aee5-4bfb-aabe-50856d350862","Type":"Loop","Transitions":{"NextAction":"da1c87de-5857-4a04-858e-8e53090ef529","Conditions":[{"NextAction":"2cab4f51-d8d3-4b77-98cc-917fffe29026","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"da1c87de-5857-4a04-858e-8e53090ef529","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"Text":"The voice id identifier is opted out or not currently enrolled in voice authentication. When you connect to an agent, they can start the enrollment process for you. "},"Identifier":"3afe4ac3-a65b-4e69-a892-57b42f6ac651","Type":"MessageParticipant","Transitions":{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","Errors":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","ErrorType":"NoMatchingError"}]}},{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"f096d844-7043-459c-b533-c4aa102f35e6","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"b2d7c987-4641-4933-b54d-60c19cf3fe53"}},{"Parameters":{"Attributes":{"VoiceIdTwo":"$.StoredCustomerInput"}},"Identifier":"2c04d490-d9fc-4419-9a84-c92b7739a2b2","Type":"UpdateContactAttributes","Transitions":{"NextAction":"d10439dd-467d-440e-93b6-a0a2e2cc1773","Errors":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"The phone number provided is invalid, please try again."},"Identifier":"51aaa9ec-749c-4b37-8806-c1e6775a8859","Type":"MessageParticipant","Transitions":{"NextAction":"f0580d95-616c-4b6a-839a-3bcfc11c0d07","Errors":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"VoiceIdOne":"$.StoredCustomerInput"}},"Identifier":"6fb644ab-127b-4bf0-826a-b6e6c4882037","Type":"UpdateContactAttributes","Transitions":{"NextAction":"e46479b0-bd92-458d-9d42-4d1587dd255f","Errors":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Please provide an identifier for your Voice ID in order to enroll, identifier cannot be empty, but can any length of number that ends with pound."},"Identifier":"d5cd7e3d-687f-4530-b7e1-07ff76ad64c0","Type":"MessageParticipant","Transitions":{"NextAction":"e46479b0-bd92-458d-9d42-4d1587dd255f","Errors":[{"NextAction":"e46479b0-bd92-458d-9d42-4d1587dd255f","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.StoredCustomerInput"},"Identifier":"956a93a5-8352-40e4-a8b0-31d88127ccf5","Type":"Compare","Transitions":{"NextAction":"2c04d490-d9fc-4419-9a84-c92b7739a2b2","Conditions":[{"NextAction":"d5cd7e3d-687f-4530-b7e1-07ff76ad64c0","Condition":{"Operator":"TextStartsWith","Operands":["#"]}},{"NextAction":"d5cd7e3d-687f-4530-b7e1-07ff76ad64c0","Condition":{"Operator":"TextContains","Operands":["*"]}},{"NextAction":"e46479b0-bd92-458d-9d42-4d1587dd255f","Condition":{"Operator":"Equals","Operands":["Timeout"]}}],"Errors":[{"NextAction":"2c04d490-d9fc-4419-9a84-c92b7739a2b2","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"StoreInput":"True","InputTimeLimitSeconds":"10","Text":"Enter your second voice identifier, followed by the pound or hash key. For example, if you're calling a financial institution, enter your card number, or if you're calling an insurance company, enter your policy number.","DTMFConfiguration":{"DisableCancelKey":"False","InputTerminationSequence":"#"},"InputValidation":{"CustomValidation":{"MaximumLength":"20"}}},"Identifier":"e46479b0-bd92-458d-9d42-4d1587dd255f","Type":"GetParticipantInput","Transitions":{"NextAction":"956a93a5-8352-40e4-a8b0-31d88127ccf5","Errors":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.StoredCustomerInput"},"Identifier":"301425c2-730b-442a-9b13-fc405ca79314","Type":"Compare","Transitions":{"NextAction":"6fb644ab-127b-4bf0-826a-b6e6c4882037","Conditions":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","Condition":{"Operator":"Equals","Operands":["*"]}},{"NextAction":"f0580d95-616c-4b6a-839a-3bcfc11c0d07","Condition":{"Operator":"Equals","Operands":["Timeout"]}},{"NextAction":"4b123a2d-3f91-4c04-bb57-b9d35ec38bfc","Condition":{"Operator":"TextStartsWith","Operands":["#"]}}],"Errors":[{"NextAction":"6fb644ab-127b-4bf0-826a-b6e6c4882037","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Text":"To enroll in Voice ID and allow us to identify you each time that you call in, enter a numerical code, followed by the pound or hash key. Your code can be any length as long as it contains at least one number."},"Identifier":"4b123a2d-3f91-4c04-bb57-b9d35ec38bfc","Type":"MessageParticipant","Transitions":{"NextAction":"f0580d95-616c-4b6a-839a-3bcfc11c0d07","Errors":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Check Voice Id failed."},"Identifier":"65280930-05f7-423e-a254-b2f78006ba16","Type":"MessageParticipant","Transitions":{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","Errors":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"I’m sorry, we were unable to set your personal code. "},"Identifier":"23a5880e-04ce-401f-80af-b23d9c32b3f5","Type":"MessageParticipant","Transitions":{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","Errors":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","ErrorType":"NoMatchingError"}]}},{"Parameters":{"CheckVoiceIdOption":"enrollmentStatus"},"Identifier":"aefc42a7-f808-4403-945c-d74f0855ab64","Type":"CheckVoiceId","Transitions":{"NextAction":"65280930-05f7-423e-a254-b2f78006ba16","Conditions":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","Condition":{"Operator":"Equals","Operands":["Enrolled"]}},{"NextAction":"3afe4ac3-a65b-4e69-a892-57b42f6ac651","Condition":{"Operator":"Equals","Operands":["NotEnrolled"]}},{"NextAction":"3afe4ac3-a65b-4e69-a892-57b42f6ac651","Condition":{"Operator":"Equals","Operands":["OptedOut"]}}],"Errors":[{"NextAction":"65280930-05f7-423e-a254-b2f78006ba16","ErrorType":"NoMatchingError"}]}},{"Parameters":{"CustomerId":"$.Attributes.VoiceIdOne$.Attributes.VoiceIdTwo"},"Identifier":"d10439dd-467d-440e-93b6-a0a2e2cc1773","Type":"UpdateContactData","Transitions":{"NextAction":"94bd6256-cb7f-49f7-b83c-b843552621df","Errors":[{"NextAction":"23a5880e-04ce-401f-80af-b23d9c32b3f5","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>Your Voice ID code has been set. Your code is <say-as interpret-as=\"digits\">$.CustomerId</say-as> </speak>"},"Identifier":"94bd6256-cb7f-49f7-b83c-b843552621df","Type":"MessageParticipant","Transitions":{"NextAction":"aefc42a7-f808-4403-945c-d74f0855ab64","Errors":[{"NextAction":"aefc42a7-f808-4403-945c-d74f0855ab64","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Thank you for calling. Calls may be monitored for quality assurance."},"Identifier":"60226e5c-be81-4440-8764-a7e53eb3262b","Type":"MessageParticipant","Transitions":{"NextAction":"39bde8c8-5fa2-4312-a9a6-d9cab13806ef","Errors":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","ErrorType":"NoMatchingError"}]}},{"Parameters":{"StoreInput":"True","InputTimeLimitSeconds":"10","Text":"Enter your personal phone number, followed by pound or hash key. This phone number can be used for voice authentication. If you do not wish to use voice authentication, press the star key.","DTMFConfiguration":{"DisableCancelKey":"False","InputTerminationSequence":"#"},"InputValidation":{"CustomValidation":{"MaximumLength":"20"}}},"Identifier":"f0580d95-616c-4b6a-839a-3bcfc11c0d07","Type":"GetParticipantInput","Transitions":{"NextAction":"301425c2-730b-442a-9b13-fc405ca79314","Errors":[{"NextAction":"a39005e6-2506-4275-86bf-060770c18f04","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"One moment while we route your call."},"Identifier":"a39005e6-2506-4275-86bf-060770c18f04","Type":"MessageParticipant","Transitions":{"NextAction":"33fdf4c5-aee5-4bfb-aabe-50856d350862","Errors":[{"NextAction":"33fdf4c5-aee5-4bfb-aabe-50856d350862","ErrorType":"NoMatchingError"}]}}]}
