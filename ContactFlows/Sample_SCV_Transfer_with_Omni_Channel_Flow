{
  "modules": [
    {
      "id": "6a5e5d4a-96c1-4590-9af4-98f2fed75ecc",
      "type": "SetLoggingBehavior",
      "branches": [
        {
          "condition": "Success",
          "transition": "d1c611c0-e78d-49f7-b3f8-04de11ae4228"
        }
      ],
      "parameters": [
        {
          "name": "LoggingBehavior",
          "value": "Enable"
        }
      ],
      "metadata": {
        "position": {
          "x": 185,
          "y": 59
        }
      }
    },
    {
      "id": "b07c9c7f-cec8-4e37-8836-1b79817406dc",
      "type": "InvokeExternalResource",
      "branches": [
        {
          "condition": "Success",
          "transition": "2d8d4f53-badb-4b42-b2e8-4dce8034f12b"
        },
        {
          "condition": "Error",
          "transition": "d1c611c0-e78d-49f7-b3f8-04de11ae4228"
        }
      ],
      "parameters": [
        {
          "name": "FunctionArn",
          "value": "arn:aws:lambda:us-west-2:058002916250:function:StmfaResell01Oregon-InvokeTelephonyIntegrationApiFunction",
          "namespace": null
        },
        {
          "name": "TimeLimit",
          "value": "8"
        },
        {
          "name": "Parameter",
          "key": "methodName",
          "value": "createTransferVC",
          "namespace": null
        }
      ],
      "metadata": {
        "position": {
          "x": 707,
          "y": 53
        },
        "dynamicMetadata": {
          "methodName": false
        },
        "useDynamic": false
      },
      "target": "Lambda"
    },
    {
      "id": "d1c611c0-e78d-49f7-b3f8-04de11ae4228",
      "type": "Loop",
      "branches": [
        {
          "condition": "Looping",
          "transition": "b07c9c7f-cec8-4e37-8836-1b79817406dc"
        },
        {
          "condition": "Complete",
          "transition": "c73545d3-c6b1-4a8e-8a02-98940e2055bc"
        }
      ],
      "parameters": [
        {
          "name": "LoopCount",
          "value": "2"
        }
      ],
      "metadata": {
        "position": {
          "x": 455,
          "y": 58
        },
        "useDynamic": false
      }
    },
    {
      "id": "c73545d3-c6b1-4a8e-8a02-98940e2055bc",
      "type": "PlayPrompt",
      "branches": [
        {
          "condition": "Success",
          "transition": "9d6d84f6-6c71-436e-b42e-333bb8d479e2"
        }
      ],
      "parameters": [
        {
          "name": "Text",
          "value": "We’re sorry—Transfer Voice Call Creation Failed",
          "namespace": null
        },
        {
          "name": "TextToSpeechType",
          "value": "text"
        }
      ],
      "metadata": {
        "position": {
          "x": 1240,
          "y": 852
        },
        "useDynamic": false
      }
    },
    {
      "id": "2d8d4f53-badb-4b42-b2e8-4dce8034f12b",
      "type": "SetAttributes",
      "branches": [
        {
          "condition": "Success",
          "transition": "20a7ef27-5127-40c1-8b5e-971ac6fc7e8e"
        },
        {
          "condition": "Error",
          "transition": "c73545d3-c6b1-4a8e-8a02-98940e2055bc"
        }
      ],
      "parameters": [
        {
          "name": "Attribute",
          "value": "voiceCallId",
          "key": "voiceCallId",
          "namespace": "External"
        }
      ],
      "metadata": {
        "position": {
          "x": 1017,
          "y": 49
        },
        "dynamicParams": [
          "voiceCallId"
        ]
      }
    },
    {
      "id": "20a7ef27-5127-40c1-8b5e-971ac6fc7e8e",
      "type": "InvokeExternalResource",
      "branches": [
        {
          "condition": "Success",
          "transition": "d1fec195-b44f-4703-97fc-ddaef57ffc6c"
        },
        {
          "condition": "Error",
          "transition": "03509e01-cd81-4157-9038-d5e17083f3bb"
        }
      ],
      "parameters": [
        {
          "name": "FunctionArn",
          "value": "arn:aws:lambda:us-west-2:058002916250:function:StmfaResell01Oregon-InvokeTelephonyIntegrationApiFunction",
          "namespace": null
        },
        {
          "name": "TimeLimit",
          "value": "8"
        },
        {
          "name": "Parameter",
          "key": "methodName",
          "value": "executeOmniFlow",
          "namespace": null
        },
        {
          "name": "Parameter",
          "key": "flowDevName",
          "value": "omniFlowFqn",
          "namespace": "User Defined"
        }
      ],
      "metadata": {
        "position": {
          "x": 1364,
          "y": 28
        },
        "dynamicMetadata": {
          "methodName": false,
          "flowDevName": true
        },
        "useDynamic": false
      },
      "target": "Lambda"
    },
    {
      "id": "03509e01-cd81-4157-9038-d5e17083f3bb",
      "type": "PlayPrompt",
      "branches": [
        {
          "condition": "Success",
          "transition": "9d6d84f6-6c71-436e-b42e-333bb8d479e2"
        }
      ],
      "parameters": [
        {
          "name": "Text",
          "value": "We’re sorry—Execute Omni Flow Failed",
          "namespace": null
        },
        {
          "name": "TextToSpeechType",
          "value": "text"
        }
      ],
      "metadata": {
        "position": {
          "x": 1889,
          "y": 785
        },
        "useDynamic": false
      }
    },
    {
      "id": "d1fec195-b44f-4703-97fc-ddaef57ffc6c",
      "type": "SetAttributes",
      "branches": [
        {
          "condition": "Success",
          "transition": "5b15c13e-5475-43b5-a395-b0f4fb4234ac"
        },
        {
          "condition": "Error",
          "transition": "03509e01-cd81-4157-9038-d5e17083f3bb"
        }
      ],
      "parameters": [
        {
          "name": "Attribute",
          "value": "queue",
          "key": "queueARN",
          "namespace": "External"
        },
        {
          "name": "Attribute",
          "value": "agent",
          "key": "agentARN",
          "namespace": "External"
        }
      ],
      "metadata": {
        "position": {
          "x": 1653,
          "y": 25
        },
        "dynamicParams": [
          "queueARN",
          "agentARN"
        ]
      }
    },
    {
      "id": "5b15c13e-5475-43b5-a395-b0f4fb4234ac",
      "type": "PlayPrompt",
      "branches": [
        {
          "condition": "Success",
          "transition": "9b7af8e7-0ca4-4a14-b54d-b14504ed5e3d"
        }
      ],
      "parameters": [
        {
          "name": "Text",
          "value": "Transferring you to the appropriate queue. One moment please.",
          "namespace": null
        },
        {
          "name": "TextToSpeechType",
          "value": "text"
        }
      ],
      "metadata": {
        "position": {
          "x": 1991,
          "y": 18
        },
        "useDynamic": false
      }
    },
    {
      "id": "4e5398bf-d3d7-458c-9676-0fadf7a30c3f",
      "type": "CheckStaffing",
      "branches": [
        {
          "condition": "True",
          "transition": "809c177d-8e2e-45ab-9a2b-fe1d59975a16"
        },
        {
          "condition": "False",
          "transition": "1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc"
        },
        {
          "condition": "Error",
          "transition": "1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc"
        }
      ],
      "parameters": [
        {
          "name": "Status",
          "value": "Available"
        }
      ],
      "metadata": {
        "position": {
          "x": 2717,
          "y": 33
        },
        "useDynamic": false,
        "queue": null
      }
    },
    {
      "id": "1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc",
      "type": "PlayPrompt",
      "branches": [
        {
          "condition": "Success",
          "transition": "9d6d84f6-6c71-436e-b42e-333bb8d479e2"
        }
      ],
      "parameters": [
        {
          "name": "Text",
          "value": "No agents are available to take your call. Please try again at a later time. We apologize for the inconvenience. Goodbye.",
          "namespace": null
        },
        {
          "name": "TextToSpeechType",
          "value": "text"
        }
      ],
      "metadata": {
        "position": {
          "x": 3135,
          "y": 639
        },
        "useDynamic": false
      }
    },
    {
      "id": "9b7af8e7-0ca4-4a14-b54d-b14504ed5e3d",
      "type": "SetQueue",
      "branches": [
        {
          "condition": "Success",
          "transition": "4e5398bf-d3d7-458c-9676-0fadf7a30c3f"
        },
        {
          "condition": "Error",
          "transition": "9aa17353-6c29-4271-9f8f-169aeb6e7b28"
        }
      ],
      "parameters": [
        {
          "name": "Agent",
          "value": "agentARN",
          "namespace": "User Defined",
          "resourceName": null
        }
      ],
      "metadata": {
        "position": {
          "x": 2297,
          "y": 6
        },
        "useDynamic": true,
        "queue": "agentARN"
      }
    },
    {
      "id": "9aa17353-6c29-4271-9f8f-169aeb6e7b28",
      "type": "SetQueue",
      "branches": [
        {
          "condition": "Success",
          "transition": "4e5398bf-d3d7-458c-9676-0fadf7a30c3f"
        },
        {
          "condition": "Error",
          "transition": "1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc"
        }
      ],
      "parameters": [
        {
          "name": "Queue",
          "value": "queueARN",
          "namespace": "User Defined",
          "resourceName": null
        }
      ],
      "metadata": {
        "position": {
          "x": 2500,
          "y": 526
        },
        "useDynamic": true,
        "queue": "queueARN"
      }
    },
    {
      "id": "9d6d84f6-6c71-436e-b42e-333bb8d479e2",
      "type": "Disconnect",
      "branches": [],
      "parameters": [],
      "metadata": {
        "position": {
          "x": 3733,
          "y": 610
        }
      }
    },
    {
      "id": "b7e84b1a-2924-4682-895f-f7d2bba2891f",
      "type": "PlayPrompt",
      "branches": [
        {
          "condition": "Success",
          "transition": "9d6d84f6-6c71-436e-b42e-333bb8d479e2"
        }
      ],
      "parameters": [
        {
          "name": "Text",
          "value": "We are experiencing a higher than normal volume of calls and cannot currently assist you. Please try again later. We apologize for any inconvenience. Goodbye.",
          "namespace": null
        },
        {
          "name": "TextToSpeechType",
          "value": "text"
        }
      ],
      "metadata": {
        "position": {
          "x": 3583,
          "y": 22
        },
        "useDynamic": false
      }
    },
    {
      "id": "1b17452f-a511-41d7-bd13-fd8d8fd54221",
      "type": "SetAttributes",
      "branches": [
        {
          "condition": "Success",
          "transition": "1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc"
        },
        {
          "condition": "Error",
          "transition": "1a6b387d-0e8a-4615-b68c-e4b40bcbcfcc"
        }
      ],
      "parameters": [
        {
          "name": "Attribute",
          "value": "Failed to transfer to queue.",
          "key": "error",
          "namespace": null
        }
      ],
      "metadata": {
        "position": {
          "x": 3474,
          "y": 227
        },
        "dynamicParams": []
      }
    },
    {
      "id": "809c177d-8e2e-45ab-9a2b-fe1d59975a16",
      "type": "SetRecordingBehavior",
      "branches": [
        {
          "condition": "Success",
          "transition": "bd8314c3-aff2-499e-a9d8-7cf7aacce79b"
        }
      ],
      "parameters": [
        {
          "name": "RecordingBehaviorOption",
          "value": "Enable"
        },
        {
          "name": "RecordingParticipantOption",
          "value": "Both"
        }
      ],
      "metadata": {
        "position": {
          "x": 2966,
          "y": 56
        }
      }
    },
    {
      "id": "bd8314c3-aff2-499e-a9d8-7cf7aacce79b",
      "type": "Transfer",
      "branches": [
        {
          "condition": "AtCapacity",
          "transition": "b7e84b1a-2924-4682-895f-f7d2bba2891f"
        },
        {
          "condition": "Error",
          "transition": "1b17452f-a511-41d7-bd13-fd8d8fd54221"
        }
      ],
      "parameters": [],
      "metadata": {
        "position": {
          "x": 3267,
          "y": 32
        },
        "useDynamic": false,
        "queue": null
      },
      "target": "Queue"
    }
  ],
  "version": "1",
  "start": "6a5e5d4a-96c1-4590-9af4-98f2fed75ecc",
  "metadata": {
    "entryPointPosition": {
      "x": 15,
      "y": 15
    },
    "snapToGrid": false,
    "name": "Sample SCV Transfer with Omni Channel Flow",
    "description": "Creates a Voice Call record and transfers the call to the specified queue.",
    "type": "queueTransfer",
    "status": "published",
    "hash": "213756a4708a456dc5360ae1772c7092d4e88e3573a263801a7411d83f016586"
  },
  "type": "queueTransfer"
}