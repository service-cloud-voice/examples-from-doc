{"Version":"2019-10-30","StartAction":"08e362ca-c010-4272-b643-6925f3b17cdb","Metadata":{"entryPointPosition":{"x":14.4,"y":34.4},"ActionMetadata":{"586ec703-3927-408c-b213-9ab389c32ccf":{"position":{"x":392.8,"y":304}},"8e83d166-df26-47c5-94f4-e980c52714b2":{"position":{"x":912,"y":220.8}},"2aa4daf5-02da-4660-9f69-42807b680f73":{"position":{"x":392,"y":14.4},"parameters":{"Attributes":{"cusSalutation":{"useDynamic":true},"cusLastName":{"useDynamic":true},"cusFirstName":{"useDynamic":true},"engFirstName":{"useDynamic":true},"status":{"useDynamic":true},"engPhone":{"useDynamic":true}}},"dynamicParams":["cusSalutation","cusLastName","cusFirstName","engFirstName","status","engPhone"]},"cc19fa18-fc18-4341-a4ee-2c494a88d00f":{"position":{"x":161.60000000000002,"y":268.8}},"08e362ca-c010-4272-b643-6925f3b17cdb":{"position":{"x":158.4,"y":14.4},"parameters":{"LambdaFunctionARN":{"displayName":"LocalContactCenter-InvokeSalesforceRestApiFunction"}},"dynamicMetadata":{"methodName":false}},"27e20751-e6ab-4f9e-9bd7-553b7ea79c7d":{"position":{"x":898.4000000000001,"y":425.6},"parameters":{"ThirdPartyPhoneNumber":{"useDynamic":true}}},"d2d7cbe9-ec78-43ef-83a0-ab8320888523":{"position":{"x":1232,"y":324.8}},"05423e58-5e59-489c-a124-26df4e1c2fe4":{"position":{"x":628,"y":16},"conditionMetadata":[{"id":"1bcb2447-4488-48d4-a83e-e604243a42e1","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"ANONYMOUS"},{"id":"1663a919-4c76-4912-a88f-83b942ff81ac","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"PHONE_NOT_FOUND"},{"id":"096d546f-ecad-4494-acbf-f74504ef06e4","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"TRANSFER_CALL"}]},"4062e0fc-77ce-47ca-a7dd-d04f822a3899":{"position":{"x":910.4000000000001,"y":20}}},"name":"Sample SCV Field Service Phone Call Subflow","description":"Connects field agents to a contact center agents","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{},"Identifier":"586ec703-3927-408c-b213-9ab389c32ccf","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"Text":"Hi. Thank you for calling. \nHowever, the technician's phone number is not available. Goodbye."},"Identifier":"8e83d166-df26-47c5-94f4-e980c52714b2","Type":"MessageParticipant","Transitions":{"NextAction":"d2d7cbe9-ec78-43ef-83a0-ab8320888523","Errors":[{"NextAction":"d2d7cbe9-ec78-43ef-83a0-ab8320888523","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"cusSalutation":"$.External.cusSalutation","cusLastName":"$.External.cusLastName","cusFirstName":"$.External.cusFirstName","engFirstName":"$.External.engFirstName","status":"$.External.status","engPhone":"$.External.engPhone"}},"Identifier":"2aa4daf5-02da-4660-9f69-42807b680f73","Type":"UpdateContactAttributes","Transitions":{"NextAction":"05423e58-5e59-489c-a124-26df4e1c2fe4","Errors":[{"NextAction":"586ec703-3927-408c-b213-9ab389c32ccf","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Hi.\nOur contact center is currently busy.\nPlease call again in a few minutes.\nThank you."},"Identifier":"cc19fa18-fc18-4341-a4ee-2c494a88d00f","Type":"MessageParticipant","Transitions":{"NextAction":"586ec703-3927-408c-b213-9ab389c32ccf","Errors":[{"NextAction":"586ec703-3927-408c-b213-9ab389c32ccf","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-west-2:668462763708:function:LocalContactCenter-InvokeSalesforceRestApiFunction","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"methodName":"SFSPhoneCallFlowQuery"}},"Identifier":"08e362ca-c010-4272-b643-6925f3b17cdb","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"2aa4daf5-02da-4660-9f69-42807b680f73","Errors":[{"NextAction":"cc19fa18-fc18-4341-a4ee-2c494a88d00f","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ThirdPartyPhoneNumber":"$.Attributes.engPhone","ThirdPartyConnectionTimeLimitSeconds":"30","ContinueFlowExecution":"False"},"Identifier":"27e20751-e6ab-4f9e-9bd7-553b7ea79c7d","Type":"TransferParticipantToThirdParty","Transitions":{"NextAction":"d2d7cbe9-ec78-43ef-83a0-ab8320888523","Errors":[{"NextAction":"d2d7cbe9-ec78-43ef-83a0-ab8320888523","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"d2d7cbe9-ec78-43ef-83a0-ab8320888523","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"ComparisonValue":"$.Attributes.status"},"Identifier":"05423e58-5e59-489c-a124-26df4e1c2fe4","Type":"Compare","Transitions":{"NextAction":"586ec703-3927-408c-b213-9ab389c32ccf","Conditions":[{"NextAction":"4062e0fc-77ce-47ca-a7dd-d04f822a3899","Condition":{"Operator":"Equals","Operands":["ANONYMOUS"]}},{"NextAction":"8e83d166-df26-47c5-94f4-e980c52714b2","Condition":{"Operator":"Equals","Operands":["PHONE_NOT_FOUND"]}},{"NextAction":"27e20751-e6ab-4f9e-9bd7-553b7ea79c7d","Condition":{"Operator":"Equals","Operands":["TRANSFER_CALL"]}}],"Errors":[{"NextAction":"586ec703-3927-408c-b213-9ab389c32ccf","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Text":"We are sorry.\nYour phone number is anonymous.\nThus it cannot be handled by our contact center.\nGood bye."},"Identifier":"4062e0fc-77ce-47ca-a7dd-d04f822a3899","Type":"MessageParticipant","Transitions":{"NextAction":"d2d7cbe9-ec78-43ef-83a0-ab8320888523","Errors":[{"NextAction":"d2d7cbe9-ec78-43ef-83a0-ab8320888523","ErrorType":"NoMatchingError"}]}}]}